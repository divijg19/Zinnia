<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>GitHub Readme Streak Stats â€” Demo</title>
  <link href="https://css-gg-cdn.pages.dev/css" rel="stylesheet">
  <link rel="stylesheet" href="./css/style.css">
  <link rel="stylesheet" href="./css/toggle-dark.css">
  <link rel="icon" href="favicon-32x32.png">
  <meta name="robots" content="noindex">
  <script>
    // Fetch metadata (themes + locales) and populate select controls before main script loads
    async function loadDemoMetadata() {
      try {
        const resp = await fetch('/api/streak/metadata');
        if (!resp.ok) return;
        const data = await resp.json();
        const themes = data.themes || {};
        const locales = data.locales || [];

        const themeSelect = document.querySelector('#theme');
        const propertiesSelect = document.querySelector('#properties');
        const localeSelect = document.querySelector('#locale');

        // populate theme select and properties select
        Object.keys(themes).forEach((themeName) => {
          const opt = document.createElement('option');
          opt.value = themeName;
          opt.textContent = themeName;
          const props = themes[themeName] || {};
          // attach data- attributes for default values (without leading #)
          Object.keys(props).forEach((k) => {
            try {
              const sanitized = String(props[k]).replace(/^#/, '');
              opt.dataset[k] = sanitized;
            } catch (e) {
              // ignore
            }
          });
          themeSelect.appendChild(opt);
        });

        // populate properties select using keys from default theme if available
        const defaultTheme = themes.default || Object.values(themes)[0] || {};
        Object.keys(defaultTheme).forEach((k) => {
          const o = document.createElement('option');
          o.value = k;
          o.textContent = k;
          propertiesSelect.appendChild(o);
        });

        // locales
        locales.forEach((l) => {
          const o = document.createElement('option');
          o.value = l;
          o.textContent = l;
          localeSelect.appendChild(o);
        });
      } catch (e) {
        console.error('Failed to load demo metadata', e);
      }
    }
    // Kick off early so options exist before scripts run
    loadDemoMetadata();
  </script>
</head>
<body>
  <h1>ðŸ”¥ GitHub Readme Streak Stats</h1>
  <div class="container">
    <div class="properties">
      <h2>Properties</h2>
      <form class="parameters">
        <label for="user">Username<span title="required">*</span></label>
        <input class="param" type="text" id="user" name="user" placeholder="DenverCoder1" />

        <label for="theme">Theme</label>
        <select class="param" id="theme" name="theme"></select>

        <label for="hide-border">Hide Border</label>
        <select class="param" id="hide-border" name="hide_border">
          <option>false</option>
          <option>true</option>
        </select>

        <label for="border-radius">Border Radius</label>
        <input class="param" type="number" id="border-radius" name="border_radius" placeholder="4.5" value="4.5" step="0.1" min="0" />

        <label for="locale">Locale</label>
        <select class="param" id="locale" name="locale"></select>

        <label for="short-numbers">Short Numbers</label>
        <select class="param" id="short-numbers" name="short_numbers">
          <option>false</option>
          <option>true</option>
        </select>

        <label for="mode">Streak Mode</label>
        <select class="param" id="mode" name="mode">
          <option value="daily">Daily</option>
          <option value="weekly">Weekly</option>
        </select>

        <span id="exclude-days-label">Exclude Days</span>
        <div class="checkbox-buttons weekdays" role="group" aria-labelledby="exclude-days-label">
          <input type="checkbox" value="Sun" id="weekday-sun" />
          <label for="weekday-sun">S</label>
          <input type="checkbox" value="Mon" id="weekday-mon" />
          <label for="weekday-mon">M</label>
          <input type="checkbox" value="Tue" id="weekday-tue" />
          <label for="weekday-tue">T</label>
          <input type="checkbox" value="Wed" id="weekday-wed" />
          <label for="weekday-wed">W</label>
          <input type="checkbox" value="Thu" id="weekday-thu" />
          <label for="weekday-thu">T</label>
          <input type="checkbox" value="Fri" id="weekday-fri" />
          <label for="weekday-fri">F</label>
          <input type="checkbox" value="Sat" id="weekday-sat" />
          <label for="weekday-sat">S</label>
          <input type="hidden" id="exclude-days" name="exclude_days" class="param" />
        </div>

        <span id="show-sections-label">Show Sections</span>
        <div class="checkbox-buttons sections" role="group" aria-labelledby="show-sections-label">
          <input type="checkbox" value="total" id="section-total" checked />
          <label for="section-total">Total</label>
          <input type="checkbox" value="current" id="section-current" checked />
          <label for="section-current">Current</label>
          <input type="checkbox" value="longest" id="section-longest" checked />
          <label for="section-longest">Longest</label>
          <input type="hidden" id="sections" name="sections" class="param" value="total,current,longest" />
        </div>

        <label for="card-width">Card Width</label>
        <input class="param" type="number" id="card-width" name="card_width" placeholder="495" value="495" step="1" min="300" />

        <label for="card-height">Card Height</label>
        <input class="param" type="number" id="card-height" name="card_height" placeholder="195" value="195" step="1" min="170" />

        <label for="type">Output Type</label>
        <select class="param" id="type" name="type">
          <option value="svg">SVG</option>
          <option value="png">PNG</option>
          <option value="json">JSON</option>
        </select>

        <details class="advanced">
          <summary>âš™ Advanced Options</summary>
          <div class="content">
            <div class="radio-buttons parameters" role="radiogroup" aria-labelledby="background-type-label">
              <span id="background-type-label">Background Type</span>
              <div class="radio-button-group">
                <div>
                  <input type="radio" id="background-type-solid" name="background-type" value="solid" checked />
                  <label for="background-type-solid">Solid</label>
                </div>
                <div>
                  <input type="radio" id="background-type-gradient" name="background-type" value="gradient" />
                  <label for="background-type-gradient">Gradient</label>
                </div>
              </div>
            </div>
            <div class="color-properties parameters">
              <label for="properties">Add Property</label>
              <select id="properties" name="properties"></select>
              <button class="plus btn" type="button" onclick="preview.addProperty()">+</button>
            </div>
          </div>
          <button class="btn" type="button" onclick="preview.exportPhp()">Export to PHP</button>
          <button id="clear-button" class="btn" type="button" onclick="preview.removeAllProperties()" disabled>Clear Options</button>
          <textarea id="exported-php" hidden></textarea>
        </details>

        <button class="btn" type="submit">Open Permalink</button>
      </form>
    </div>

    <div class="output top-bottom-split">
      <div class="top">
        <h2>Preview</h2>
        <img alt="GitHub Readme Streak Stats" src="/api/streak/preview?user=" />
        <div class="json" style="display: none;"><pre></pre></div>
        <p class="warning">Note: The stats above are just examples and not from your GitHub profile.</p>

        <div>
          <h2>Markdown</h2>
          <div class="code-container md"><code></code></div>
          <button class="copy-button btn tooltip copy-md" onclick="clipboard.copy(this);" onmouseout="tooltip.reset(this);" disabled>Copy To Clipboard</button>
        </div>

        <div>
          <h2>HTML</h2>
          <div class="code-container html"><code></code></div>
          <button class="copy-button btn tooltip copy-html" onclick="clipboard.copy(this);" onmouseout="tooltip.reset(this);" disabled>Copy To Clipboard</button>
        </div>

        <div>
          <h2>JSON</h2>
          <div class="code-container json"><code></code></div>
          <button class="copy-button btn tooltip copy-json" onclick="clipboard.copy(this);" onmouseout="tooltip.reset(this);" disabled>Copy To Clipboard</button>
        </div>
      </div>
      <div class="bottom">
        <a href="https://github.com/DenverCoder1/github-readme-streak-stats/blob/main/docs/faq.md" target="_blank" class="underline-hover faq">Frequently Asked Questions</a>
      </div>
    </div>
  </div>

  <script src="./js/jscolor.min.js" defer></script>
  <script src="./js/accordion.js" defer></script>
  <script src="./js/toggle-dark.js" defer></script>
  <script src="./js/script.js" defer></script>
</body>
</html>
